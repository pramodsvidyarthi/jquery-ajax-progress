<!DOCTYPE html>
<html>
    <head>
        <title>Ajax Progress</title>
        
        <!-- Meta -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        
        <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
        
        <!-- Google CDN -->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
        <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/black-tie/jquery-ui.css" />
        
        <script src="js/jquery.ajax-progress.js" type="text/javascript"></script>
        <script>
            $(function() {
                $('#prog').progressbar({ value: 0 });
                
                $.ajax({
                    method: 'GET',
                    url: '/api',
                    // url:'https://api.github.com/users/octocat/subscriptions',
                    // url:'https://public.opencpu.org/ocpu/library/',
                    dataType: 'text',
                    success: function(data) {
                        console.log('YAYE!');
                        // $.each(data,function(val,ind){
                        //     console.log(ind.Group);
                        // });
                    },
                    error: function() {
                        console.log('AWWW!');
                    },
                    progress: function(e) {
                        console.log(e);
                        if(e.lengthComputable) {
                            var pct = (e.loaded / e.total) * 100;

                            $('#prog')
                                // .progressbar('option', 'value', pct)
                                // .children('.ui-progressbar-value')
                                // .html(pct.toPrecision(3) + '%')
                                // .css('display', 'block');
                                console.log(pct);
                        } else {
                            console.warn('Content Length not reported!');
                        }
                    }
                });
            });
        </script>
    </head>
    <body>
        <div id="prog"></div>
    </body>
</html>
